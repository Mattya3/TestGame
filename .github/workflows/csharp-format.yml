name: C# Code Formatting

on:
  pull_request:
    paths:
      - '**.cs'
    types: [opened, synchronize, reopened]

permissions:
  contents: write # BotãŒè‡ªå‹•ã‚³ãƒŸãƒƒãƒˆã‚’Pushã™ã‚‹ãŸã‚ã«å¿…è¦

jobs:
  format:
    name: Auto Format C# Code
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
        with:
          # PRã®å ´åˆã¯PRã®ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã—ï¼Œãã†ã§ãªã„å ´åˆã¯ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒ
          ref: ${{ github.event.pull_request.head.ref || github.ref }}

      - name: Setup .NET
        uses: actions/setup-dotnet@v4
        with:
          dotnet-version: '8.0.x'

      - name: Add .NET tools to PATH
        run: echo "$HOME/.dotnet/tools" >> $GITHUB_PATH

      - name: Install CSharpier
        run: dotnet tool install --global csharpier

      - name: Run Formatter (CSharpier)
        # ãƒ•ã‚©ãƒ«ãƒ€ç›´ä¸‹ã®ã™ã¹ã¦ã®.csãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†å¸°çš„ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        run: dotnet csharpier .

      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "ğŸ¨ style: Auto format C# code by CSharpier"
          commit_user_name: "github-actions[bot]"
          commit_user_email: "github-actions[bot]@users.noreply.github.com"
