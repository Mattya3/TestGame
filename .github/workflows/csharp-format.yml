name: C# Code Formatting

on:
  pull_request:
    paths:
      - '**.cs'
    types: [opened, synchronize, reopened]

permissions:
  contents: write # BotãŒè‡ªå‹•ã‚³ãƒŸãƒƒãƒˆã‚’Pushã™ã‚‹ãŸã‚ã«å¿…è¦

jobs:
  format:
    name: Auto Format C# Code
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
        with:
          # PRã®å ´åˆã¯PRã®ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã—ï¼Œãã†ã§ãªã„å ´åˆã¯ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒ
          ref: ${{ github.event.pull_request.head.ref || github.ref }}

      - name: Setup .NET
        uses: actions/setup-dotnet@v4
        with:
          dotnet-version: '8.0.x'

      - name: Install CSharpier
        run: |
          dotnet new tool-manifest --force
          dotnet tool install csharpier

      - name: Run Formatter (CSharpier)
        # 'format'ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’æ˜ç¤ºã—ï¼Œãƒ­ãƒ¼ã‚«ãƒ«ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦å®Ÿè¡Œã—ã¾ã™
        run: dotnet tool run csharpier format .

      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "ğŸ¨ style: Auto format C# code by CSharpier"
          commit_user_name: "github-actions[bot]"
          commit_user_email: "github-actions[bot]@users.noreply.github.com"
